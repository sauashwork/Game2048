{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE = process.env.REACT_APP_API_BASE && process.env.REACT_APP_API_BASE.replace(/\\/+$/, '') || \"/api/game\";\nconst endpoint = path => `${API_BASE}${path.startsWith(\"/\") ? \"\" : \"/\"}${path}`;\nexport function newGame(size = 4) {\n  return axios.post(endpoint(`/new?size=${encodeURIComponent(size)}`));\n}\nexport function getState(gameId) {\n  return axios.get(endpoint(`/state/${encodeURIComponent(gameId)}`));\n}\n\n// robust move: try multiple common request shapes and return the first successful response.\n// Also rethrows the last error if all attempts fail.\nexport async function move(gameId, direction) {\n  const url = endpoint(\"/move\");\n  const attempts = [{\n    desc: \"JSON {gameId,direction}\",\n    call: () => axios.post(url, {\n      gameId,\n      direction\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n  }, {\n    desc: \"JSON {id,direction}\",\n    call: () => axios.post(url, {\n      id: gameId,\n      direction\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n  }, {\n    desc: \"JSON {direction} (no id)\",\n    call: () => axios.post(url, {\n      direction\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n  }, {\n    desc: \"query params (gameId,direction)\",\n    call: () => axios.post(url, null, {\n      params: {\n        gameId,\n        direction\n      }\n    })\n  }, {\n    desc: \"query params (id,direction)\",\n    call: () => axios.post(url, null, {\n      params: {\n        id: gameId,\n        direction\n      }\n    })\n  }, {\n    desc: \"form-urlencoded (gameId,direction)\",\n    call: () => axios.post(url, new URLSearchParams({\n      gameId,\n      direction\n    }), {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    })\n  }];\n  let lastErr = null;\n  for (const a of attempts) {\n    try {\n      const res = await a.call();\n      // success\n      console.debug(\"move: successful attempt:\", a.desc, res === null || res === void 0 ? void 0 : res.status);\n      return res;\n    } catch (err) {\n      var _err$response, _err$response2;\n      lastErr = err;\n      // log server response body if available for debugging\n      console.warn(\"move attempt failed:\", a.desc, {\n        status: err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status,\n        body: err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data,\n        message: err === null || err === void 0 ? void 0 : err.message\n      });\n    }\n  }\n\n  // if we get here, rethrow last error so caller handles it\n  throw lastErr;\n}\nexport function restart(gameId) {\n  return axios.post(endpoint(\"/restart\"), {\n    gameId\n  });\n}\nexport default {\n  newGame,\n  getState,\n  move,\n  restart\n};","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_BASE","replace","endpoint","path","startsWith","newGame","size","post","encodeURIComponent","getState","gameId","get","move","direction","url","attempts","desc","call","headers","id","params","URLSearchParams","lastErr","a","res","console","debug","status","err","_err$response","_err$response2","warn","response","body","data","message","restart"],"sources":["C:/Users/ashok.MSI/Projects/2048_game_project/2048_game_project_with_ui/frontend/src/api/gameApi.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_BASE = (process.env.REACT_APP_API_BASE && process.env.REACT_APP_API_BASE.replace(/\\/+$/,'')) || \"/api/game\";\nconst endpoint = (path) => `${API_BASE}${path.startsWith(\"/\") ? \"\" : \"/\"}${path}`;\n\nexport function newGame(size = 4) {\n  return axios.post(endpoint(`/new?size=${encodeURIComponent(size)}`));\n}\n\nexport function getState(gameId) {\n  return axios.get(endpoint(`/state/${encodeURIComponent(gameId)}`));\n}\n\n// robust move: try multiple common request shapes and return the first successful response.\n// Also rethrows the last error if all attempts fail.\nexport async function move(gameId, direction) {\n  const url = endpoint(\"/move\");\n  const attempts = [\n    { desc: \"JSON {gameId,direction}\", call: () => axios.post(url, { gameId, direction }, { headers: { \"Content-Type\": \"application/json\" } }) },\n    { desc: \"JSON {id,direction}\", call: () => axios.post(url, { id: gameId, direction }, { headers: { \"Content-Type\": \"application/json\" } }) },\n    { desc: \"JSON {direction} (no id)\", call: () => axios.post(url, { direction }, { headers: { \"Content-Type\": \"application/json\" } }) },\n    { desc: \"query params (gameId,direction)\", call: () => axios.post(url, null, { params: { gameId, direction } }) },\n    { desc: \"query params (id,direction)\", call: () => axios.post(url, null, { params: { id: gameId, direction } }) },\n    { desc: \"form-urlencoded (gameId,direction)\", call: () => axios.post(url, new URLSearchParams({ gameId, direction }), { headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" } }) }\n  ];\n\n  let lastErr = null;\n  for (const a of attempts) {\n    try {\n      const res = await a.call();\n      // success\n      console.debug(\"move: successful attempt:\", a.desc, res?.status);\n      return res;\n    } catch (err) {\n      lastErr = err;\n      // log server response body if available for debugging\n      console.warn(\"move attempt failed:\", a.desc, {\n        status: err?.response?.status,\n        body: err?.response?.data,\n        message: err?.message\n      });\n    }\n  }\n\n  // if we get here, rethrow last error so caller handles it\n  throw lastErr;\n}\n\nexport function restart(gameId) {\n  return axios.post(endpoint(\"/restart\"), { gameId });\n}\n\nexport default { newGame, getState, move, restart };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}